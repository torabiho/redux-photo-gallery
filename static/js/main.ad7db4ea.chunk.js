(this["webpackJsonpredux-photo-gallery"]=this["webpackJsonpredux-photo-gallery"]||[]).push([[0],{13:function(e,t,c){},20:function(e,t,c){e.exports=c(36)},25:function(e,t,c){},30:function(e,t,c){},32:function(e,t,c){},33:function(e,t,c){},34:function(e,t,c){},35:function(e,t,c){},36:function(e,t,c){"use strict";c.r(t);var n=c(0),a=c.n(n),o=c(5),r=(c(25),c(3)),l=c(14),s=c(4),i=c(6),u={cancel:"M15.898,4.045c-0.271-0.272-0.713-0.272-0.986,0l-4.71,4.711L5.493,4.045c-0.272-0.272-0.714-0.272-0.986,0s-0.272,0.714,0,0.986l4.709,4.711l-4.71,4.711c-0.272,0.271-0.272,0.713,0,0.986c0.136,0.136,0.314,0.203,0.492,0.203c0.179,0,0.357-0.067,0.493-0.203l4.711-4.711l4.71,4.711c0.137,0.136,0.314,0.203,0.494,0.203c0.178,0,0.355-0.067,0.492-0.203c0.273-0.273,0.273-0.715,0-0.986l-4.711-4.711l4.711-4.711C16.172,4.759,16.172,4.317,15.898,4.045z",check:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z",pending:"M11.088,2.542c0.063-0.146,0.103-0.306,0.103-0.476c0-0.657-0.534-1.19-1.19-1.19c-0.657,0-1.19,0.533-1.19,1.19c0,0.17,0.038,0.33,0.102,0.476c-4.085,0.535-7.243,4.021-7.243,8.252c0,4.601,3.73,8.332,8.332,8.332c4.601,0,8.331-3.73,8.331-8.332C18.331,6.562,15.173,3.076,11.088,2.542z M10,1.669c0.219,0,0.396,0.177,0.396,0.396S10.219,2.462,10,2.462c-0.22,0-0.397-0.177-0.397-0.396S9.78,1.669,10,1.669z M10,18.332c-4.163,0-7.538-3.375-7.538-7.539c0-4.163,3.375-7.538,7.538-7.538c4.162,0,7.538,3.375,7.538,7.538C17.538,14.957,14.162,18.332,10,18.332z M10.386,9.26c0.002-0.018,0.011-0.034,0.011-0.053V5.24c0-0.219-0.177-0.396-0.396-0.396c-0.22,0-0.397,0.177-0.397,0.396v3.967c0,0.019,0.008,0.035,0.011,0.053c-0.689,0.173-1.201,0.792-1.201,1.534c0,0.324,0.098,0.625,0.264,0.875c-0.079,0.014-0.155,0.043-0.216,0.104l-2.244,2.244c-0.155,0.154-0.155,0.406,0,0.561s0.406,0.154,0.561,0l2.244-2.242c0.061-0.062,0.091-0.139,0.104-0.217c0.251,0.166,0.551,0.264,0.875,0.264c0.876,0,1.587-0.711,1.587-1.587C11.587,10.052,11.075,9.433,10.386,9.26z M10,11.586c-0.438,0-0.793-0.354-0.793-0.792c0-0.438,0.355-0.792,0.793-0.792c0.438,0,0.793,0.355,0.793,0.792C10.793,11.232,10.438,11.586,10,11.586z",share:"M14.68,12.621c-0.9,0-1.702,0.43-2.216,1.09l-4.549-2.637c0.284-0.691,0.284-1.457,0-2.146l4.549-2.638c0.514,0.661,1.315,1.09,2.216,1.09c1.549,0,2.809-1.26,2.809-2.808c0-1.548-1.26-2.809-2.809-2.809c-1.548,0-2.808,1.26-2.808,2.809c0,0.38,0.076,0.741,0.214,1.073l-4.55,2.638c-0.515-0.661-1.316-1.09-2.217-1.09c-1.548,0-2.808,1.26-2.808,2.809s1.26,2.808,2.808,2.808c0.9,0,1.702-0.43,2.217-1.09l4.55,2.637c-0.138,0.332-0.214,0.693-0.214,1.074c0,1.549,1.26,2.809,2.808,2.809c1.549,0,2.809-1.26,2.809-2.809S16.229,12.621,14.68,12.621M14.68,2.512c1.136,0,2.06,0.923,2.06,2.06S15.815,6.63,14.68,6.63s-2.059-0.923-2.059-2.059S13.544,2.512,14.68,2.512M5.319,12.061c-1.136,0-2.06-0.924-2.06-2.06s0.923-2.059,2.06-2.059c1.135,0,2.06,0.923,2.06,2.059S6.454,12.061,5.319,12.061M14.68,17.488c-1.136,0-2.059-0.922-2.059-2.059s0.923-2.061,2.059-2.061s2.06,0.924,2.06,2.061S15.815,17.488,14.68,17.488",user:"M12.443,9.672c0.203-0.496,0.329-1.052,0.329-1.652c0-1.969-1.241-3.565-2.772-3.565S7.228,6.051,7.228,8.02c0,0.599,0.126,1.156,0.33,1.652c-1.379,0.555-2.31,1.553-2.31,2.704c0,1.75,2.128,3.169,4.753,3.169c2.624,0,4.753-1.419,4.753-3.169C14.753,11.225,13.821,10.227,12.443,9.672z M10,5.247c1.094,0,1.98,1.242,1.98,2.773c0,1.531-0.887,2.772-1.98,2.772S8.02,9.551,8.02,8.02C8.02,6.489,8.906,5.247,10,5.247z M10,14.753c-2.187,0-3.96-1.063-3.96-2.377c0-0.854,0.757-1.596,1.885-2.015c0.508,0.745,1.245,1.224,2.076,1.224s1.567-0.479,2.076-1.224c1.127,0.418,1.885,1.162,1.885,2.015C13.961,13.689,12.188,14.753,10,14.753z M10,0.891c-5.031,0-9.109,4.079-9.109,9.109c0,5.031,4.079,9.109,9.109,9.109c5.031,0,9.109-4.078,9.109-9.109C19.109,4.969,15.031,0.891,10,0.891z M10,18.317c-4.593,0-8.317-3.725-8.317-8.317c0-4.593,3.724-8.317,8.317-8.317c4.593,0,8.317,3.724,8.317,8.317C18.317,14.593,14.593,18.317,10,18.317z"},h=function(e){var t=e.name,c=e.className,n=e.onClick,o=e.viewBox,r=e.width,l=e.height;return a.a.createElement("svg",{className:c,onClick:n,viewBox:o,width:r,height:l,fill:"white"},a.a.createElement("path",{d:u[t]}))};h.defaultProps={viewBox:"0 0 20 20",width:"24px",height:"24px"};c(30);var d=function(e){var t=e.selectedPhotos,c=e.shareSelectedPhotos,o=e.selectedUnsharedPhotos,r=e.switchSelectAll,l=Object(n.useState)(!1),s=Object(i.a)(l,2),u=s[0],d=s[1];Object(n.useEffect)((function(){0===o.length&&u&&d(!1)}),[o,u]);var p=o.length===t.length;return a.a.createElement("div",{className:"footer"},a.a.createElement("div",{className:"footer__right"},o.length>0&&a.a.createElement("div",{onClick:function(){return d(!u)}},a.a.createElement(h,{name:"share",className:"footer__share-icon"})),u&&a.a.createElement("div",{className:"popup"},!p&&a.a.createElement("p",null,o.length," of ",t.length," selected photos are not shared."),a.a.createElement("p",null,"Share ",o.length," photos?"),a.a.createElement("div",{className:"popup__action-buttons"},a.a.createElement("div",{className:"popup__action--close",onClick:function(){d(!1)}},"Cancel"),a.a.createElement("div",{className:"popup__action--send",onClick:function(){c(o),d(!1)}},"Share"))),a.a.createElement("div",null,a.a.createElement(h,{name:"user",className:"footer__share-icon"}))),t.length>0&&a.a.createElement("div",{className:"footer__left"},a.a.createElement(h,{name:"cancel",className:"cancel-icon",width:"20px",height:"20px",onClick:function(){d(!1),r(!1)}}),"".concat(t.length," Selected")))},p=c(10),m=c.n(p),E=c(16),f=function(e,t){return{type:"SHARE_PHOTO_UPDATE",payload:{id:e,website:t}}},O=function(e,t){return{type:"SHARE_PHOTO_FAILURE",payload:{id:e,website:null,error:t}}},b=function(e){return{type:"TOGGLE_SELECT_ALL",isSelected:e}};function S(e){if(!e.ok)throw Error(e.statusText);return e}var g=c(2),_=c(19),v={items:[],loading:!1,error:null},C=function(e){return e.filter((function(e){return e.selected}))};var y,j=Object(s.b)((function(e){return{selectedPhotos:C(e.photos.items),selectedUnsharedPhotos:(t=e.photos.items,t.filter((function(e){return e.selected&&null===e.website})))};var t}),(function(e){return{shareSelectedPhotos:function(t){return e((c=t,function(e){Promise.all(c.map(function(){var t=Object(E.a)(m.a.mark((function t(c){return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e(f(c.id,"PENDING_APPROVAL")),t.abrupt("return",fetch("".concat("https://hosseintorabi.herokuapp.com/api/portfolio","/website/photos/").concat(c.id),{method:"POST"}).then(S).then((function(e){return e.json()})).then((function(t){return e(f(c.id,t.photo.website)),e(b(!1)),t.photos})).catch((function(t){e(O(c.id,t))})));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())).then((function(e){console.log("end of promise all",e)})).catch((function(e){console.log("catch promise all",e)}))}));var c},switchSelectAll:function(t){return e(b(t))}}}))(d),w=c(17),N=(c(32),function(e){var t=e.selected,c=e.hovered;return a.a.createElement("div",{className:t||c?"checkmark":"hidden"},a.a.createElement("svg",{className:"checkmark__icon ".concat(c&&!t?"checkmark__icon--hover":""),width:"24px",height:"24px"},a.a.createElement("circle",{cx:"12.5",cy:"12.2",r:"8.292"})),a.a.createElement(h,{name:"check",viewBox:"0 0 24 24",className:"checkmark__circle ".concat(c&&!t?"checkmark__circle--hover":"")}))}),T=(c(33),function(e){var t=e.sharingStatus;return a.a.createElement(a.a.Fragment,null,"WEBSITE_APPROVED"===t&&a.a.createElement(h,{name:"share",className:"share-icon"}),"PENDING_APPROVAL"===t&&a.a.createElement(h,{name:"pending",className:"pending-icon",width:"120px",height:"120px"}))}),P=(c(34),{transform:"translateZ(0px) scale3d(0.9, 0.9, 1)",transition:"transform .135s cubic-bezier(0.0,0.0,0.2,1),opacity linear .15s"}),k=function(e){var t=e.photo,c=e.onClick,o=e.selectionMode,r=Object(n.useState)(!1),l=Object(i.a)(r,2),s=l[0],u=l[1],h=(100-30/t.width*100)/100,d=(100-30/t.height*100)/100;P.transform="translateZ(0px) scale3d(".concat(h,", ").concat(d,", 1)");var p=t.selected?Object(g.a)({},P):{},m="PENDING_APPROVAL"===t.website?.3:1;return a.a.createElement("div",{style:{height:t.height,width:t.width},className:"image__container ".concat(t.selected?"selected":""),onMouseEnter:function(){return u(!t.selected)},onMouseLeave:function(){return u(!1)}},!o||t.selected||s?a.a.createElement(N,{selected:t.selected,hovered:s}):a.a.createElement("div",{className:"selection-placeholder"}),a.a.createElement(T,{sharingStatus:t.website}),a.a.createElement("img",Object.assign({alt:t.title,className:"image",style:Object(g.a)(Object(g.a)({},p),{},{opacity:m})},t,{onClick:c})))},A=(c(13),Object(s.b)((function(e){return{photos:e.photos.items,loading:e.photos.loading,error:e.photos.error,selectedPhotos:C(e.photos.items),allSelected:(t=e.photos.items,t.every((function(e){return e.selected})))};var t}),(function(e){return{getPhotos:function(){return e((function(e){return e({type:"FETCH_PHOTOS_BEGIN"}),e({type:"WEBSOCKET_CONNECT",payload:{url:"".concat("wss://hosseintorabi.herokuapp.com/api/portfolio","/ws")}}),fetch("".concat("https://hosseintorabi.herokuapp.com/api/portfolio","/")).then(S).then((function(e){return e.json()})).then((function(t){return e({type:"FETCH_PHOTOS_SUCCESS",payload:{photos:t.photos}}),t.photos})).catch((function(t){return e(function(e){return{type:"FETCH_PHOTOS_FAILURE",payload:{error:e}}}(t))}))}))},togglePhotoSelection:function(t){return e(function(e){return{type:"TOGGLE_SELECTION",id:e}}(t))},switchSelectAll:function(t){return e(b(t))}}}))((function(e){var t=e.error,c=e.loading,o=e.photos,r=e.getPhotos,l=e.togglePhotoSelection,s=e.switchSelectAll,i=e.allSelected,u=e.selectedPhotos;Object(n.useEffect)((function(){r()}),[]);var h,d=Object(n.useCallback)((function(e){var t=e.index,c=e.photo;return a.a.createElement(k,{onClick:function(){return l(c.id)},key:c.id,index:t,photo:c,selectionMode:u.length>0})}),[l,u]);return t?a.a.createElement("div",null,"Error! ",t.message):c?a.a.createElement("div",null,"Loading..."):a.a.createElement(a.a.Fragment,null,a.a.createElement("div",{className:"toggle-select",onClick:function(){s(!i)}},i?"Deselect All":"Select All"),a.a.createElement(w.a,{photos:(h=o,h.map((function(e){var t=e.url,c=Object(_.a)(e,["url"]);return Object(g.a)({src:t,height:+e.url.split("&h=")[1].split("&")[0],width:+e.url.split("&w=")[1].split("&")[0]},c)}))),renderImage:d}))}))),x=(c(35),function(){return a.a.createElement("header",{className:"header"},a.a.createElement("h1",{className:"header__title"},"Redux-Powered Photo Gallery"),a.a.createElement("p",null,"This is a Google Photos style app for showcasing React and Redux implementation and integration. The app is connected to a mock server and allows user to interactively select and share photos. It makes API calls to retrieve and share photos and listens for the response using a WebSocket."),a.a.createElement("p",null,"To test it select as many photos as you like and click on the share icon at the bottom. There must be at least one non-shared photo selected"),a.a.createElement("p",null,"Source Code: ",a.a.createElement("a",{className:"header__link",href:"https://github.com/torabiho/redux-photo-gallery",target:"_blank"},"github.com/torabiho/redux-photo-gallery")))}),L=function(){return a.a.createElement("div",{className:"main-wrapper"},a.a.createElement(x,null),a.a.createElement(A,null),a.a.createElement(j,null))},M=Object(r.c)({photos:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_PHOTOS_BEGIN":return Object(g.a)(Object(g.a)({},e),{},{loading:!0,error:null});case"FETCH_PHOTOS_SUCCESS":return Object(g.a)(Object(g.a)({},e),{},{loading:!1,items:t.payload.photos});case"FETCH_PHOTOS_FAILURE":return Object(g.a)(Object(g.a)({},e),{},{loading:!1,error:t.payload.error,items:[]});case"TOGGLE_SELECTION":return Object(g.a)(Object(g.a)({},e),{},{items:e.items.map((function(e){return e.id===t.id?Object(g.a)(Object(g.a)({},e),{},{selected:!e.selected}):e}))});case"TOGGLE_SELECT_ALL":return Object(g.a)(Object(g.a)({},e),{},{items:e.items.map((function(e){return Object(g.a)(Object(g.a)({},e),{},{selected:t.isSelected})}))});case"SHARE_PHOTO_UPDATE":return Object(g.a)(Object(g.a)({},e),{},{items:e.items.map((function(e){return e.id===t.payload.id?Object(g.a)(Object(g.a)({},e),{},{website:t.payload.website}):e}))});case"SHARE_PHOTO_FAILURE":return Object(g.a)(Object(g.a)({},e),{},{error:t.payload.error,items:e.items.map((function(e){return e.id===t.payload.id?Object(g.a)(Object(g.a)({},e),{},{website:t.payload.website}):e}))});case"WEBSOCKET_MESSAGE":var c=JSON.parse(t.payload.data);return Object(g.a)(Object(g.a)({},e),{},{items:e.items.map((function(e){return e.id===c.photo.id?Object(g.a)(Object(g.a)({},e),{},{website:c.event}):e}))});default:return e}}}),H=function(e){return function(t){return function(c){var n=e.dispatch;switch(c.type){case"WEBSOCKET_CONNECT":(y=new WebSocket(c.payload.url)).onopen=function(){return n({type:"WEBSOCKET_OPEN"})},y.onclose=function(e){return n({type:"WEBSOCKET_CLOSE",payload:e})},y.onmessage=function(e){return n({type:"WEBSOCKET_MESSAGE",payload:e})};break;case"WEBSOCKET_SEND":y.send(JSON.stringify(c.payload));break;case"WEBSOCKET_DISCONNECT":y.close()}return t(c)}}},G=Object(r.d)(M,Object(r.a)(l.a,H));Object(o.render)(a.a.createElement(s.a,{store:G},a.a.createElement(L,null)),document.getElementById("root"))}},[[20,1,2]]]);
//# sourceMappingURL=main.ad7db4ea.chunk.js.map