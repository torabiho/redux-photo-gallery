{"version":3,"sources":["components/Icon.js","components/Footer.js","constants/states.js","actions/photos.js","constants/actions.js","selectors/index.js","containers/SelectedPhotos.js","components/Checkmark.js","components/SharedIcon.js","components/Photo.js","components/PhotosList.js","components/Header.js","components/App.js","reducers/photos.js","reducers/index.js","middleware/websocket.js","index.js"],"names":["iconPathMap","cancel","check","pending","share","user","Icon","name","className","onClick","viewBox","width","height","fill","d","defaultProps","Footer","selectedPhotos","shareSelectedPhotos","selectedUnsharedPhotos","switchSelectAll","useState","popupVisibility","toggleVisibility","useEffect","length","areUnsharedAndSelectedEqual","loadingStates","sharePhotoUpdate","id","website","type","payload","sharePhotoFailure","error","toggleSelectAll","isSelected","fetchPhotos","dispatch","url","process","fetch","then","handleErrors","res","json","photos","catch","loadingStatus","fetchPhotosFailure","response","ok","Error","statusText","getSelectedPhotos","items","filter","item","selected","connect","state","Promise","all","map","photo","a","method","data","console","log","err","Checkmark","hovered","cx","cy","r","SharedIcon","sharingStatus","strokeWidth","selectedImgStyle","transform","transition","SelectedImage","selectionMode","isHovered","setIsHovered","sx","sy","imageStyle","imageOpacity","style","onMouseEnter","onMouseLeave","alt","title","opacity","allSelected","every","getPhotos","togglePhotoSelection","toggleSelection","props","imageRenderer","useCallback","index","key","u","others","src","split","renderImage","Header","rel","href","target","App","SelectedPhotos","initialState","setLoadingState","action","loadPhotos","setErrorState","toggleSelectionAll","setSharePhotoPending","setSharePhotoError","setSharePhotoDone","JSON","parse","event","combineReducers","ws","websocket","store","next","WebSocket","onopen","onclose","onmessage","send","stringify","close","createStore","rootReducer","applyMiddleware","thunk","render","document","getElementById"],"mappings":"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","file":"static/js/main.81c47b67.chunk.js","sourcesContent":["import React from 'react';\nimport PropTypes from 'prop-types';\n\nconst iconPathMap = {\n    cancel: \"M15.898,4.045c-0.271-0.272-0.713-0.272-0.986,0l-4.71,4.711L5.493,4.045c-0.272-0.272-0.714-0.272-0.986,0s-0.272,0.714,0,0.986l4.709,4.711l-4.71,4.711c-0.272,0.271-0.272,0.713,0,0.986c0.136,0.136,0.314,0.203,0.492,0.203c0.179,0,0.357-0.067,0.493-0.203l4.711-4.711l4.71,4.711c0.137,0.136,0.314,0.203,0.494,0.203c0.178,0,0.355-0.067,0.492-0.203c0.273-0.273,0.273-0.715,0-0.986l-4.711-4.711l4.711-4.711C16.172,4.759,16.172,4.317,15.898,4.045z\",\n    check: \"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z\",\n    pending: \"M11.088,2.542c0.063-0.146,0.103-0.306,0.103-0.476c0-0.657-0.534-1.19-1.19-1.19c-0.657,0-1.19,0.533-1.19,1.19c0,0.17,0.038,0.33,0.102,0.476c-4.085,0.535-7.243,4.021-7.243,8.252c0,4.601,3.73,8.332,8.332,8.332c4.601,0,8.331-3.73,8.331-8.332C18.331,6.562,15.173,3.076,11.088,2.542z M10,1.669c0.219,0,0.396,0.177,0.396,0.396S10.219,2.462,10,2.462c-0.22,0-0.397-0.177-0.397-0.396S9.78,1.669,10,1.669z M10,18.332c-4.163,0-7.538-3.375-7.538-7.539c0-4.163,3.375-7.538,7.538-7.538c4.162,0,7.538,3.375,7.538,7.538C17.538,14.957,14.162,18.332,10,18.332z M10.386,9.26c0.002-0.018,0.011-0.034,0.011-0.053V5.24c0-0.219-0.177-0.396-0.396-0.396c-0.22,0-0.397,0.177-0.397,0.396v3.967c0,0.019,0.008,0.035,0.011,0.053c-0.689,0.173-1.201,0.792-1.201,1.534c0,0.324,0.098,0.625,0.264,0.875c-0.079,0.014-0.155,0.043-0.216,0.104l-2.244,2.244c-0.155,0.154-0.155,0.406,0,0.561s0.406,0.154,0.561,0l2.244-2.242c0.061-0.062,0.091-0.139,0.104-0.217c0.251,0.166,0.551,0.264,0.875,0.264c0.876,0,1.587-0.711,1.587-1.587C11.587,10.052,11.075,9.433,10.386,9.26z M10,11.586c-0.438,0-0.793-0.354-0.793-0.792c0-0.438,0.355-0.792,0.793-0.792c0.438,0,0.793,0.355,0.793,0.792C10.793,11.232,10.438,11.586,10,11.586z\",\n    share: \"M14.68,12.621c-0.9,0-1.702,0.43-2.216,1.09l-4.549-2.637c0.284-0.691,0.284-1.457,0-2.146l4.549-2.638c0.514,0.661,1.315,1.09,2.216,1.09c1.549,0,2.809-1.26,2.809-2.808c0-1.548-1.26-2.809-2.809-2.809c-1.548,0-2.808,1.26-2.808,2.809c0,0.38,0.076,0.741,0.214,1.073l-4.55,2.638c-0.515-0.661-1.316-1.09-2.217-1.09c-1.548,0-2.808,1.26-2.808,2.809s1.26,2.808,2.808,2.808c0.9,0,1.702-0.43,2.217-1.09l4.55,2.637c-0.138,0.332-0.214,0.693-0.214,1.074c0,1.549,1.26,2.809,2.808,2.809c1.549,0,2.809-1.26,2.809-2.809S16.229,12.621,14.68,12.621M14.68,2.512c1.136,0,2.06,0.923,2.06,2.06S15.815,6.63,14.68,6.63s-2.059-0.923-2.059-2.059S13.544,2.512,14.68,2.512M5.319,12.061c-1.136,0-2.06-0.924-2.06-2.06s0.923-2.059,2.06-2.059c1.135,0,2.06,0.923,2.06,2.059S6.454,12.061,5.319,12.061M14.68,17.488c-1.136,0-2.059-0.922-2.059-2.059s0.923-2.061,2.059-2.061s2.06,0.924,2.06,2.061S15.815,17.488,14.68,17.488\",\n    user: \"M12.443,9.672c0.203-0.496,0.329-1.052,0.329-1.652c0-1.969-1.241-3.565-2.772-3.565S7.228,6.051,7.228,8.02c0,0.599,0.126,1.156,0.33,1.652c-1.379,0.555-2.31,1.553-2.31,2.704c0,1.75,2.128,3.169,4.753,3.169c2.624,0,4.753-1.419,4.753-3.169C14.753,11.225,13.821,10.227,12.443,9.672z M10,5.247c1.094,0,1.98,1.242,1.98,2.773c0,1.531-0.887,2.772-1.98,2.772S8.02,9.551,8.02,8.02C8.02,6.489,8.906,5.247,10,5.247z M10,14.753c-2.187,0-3.96-1.063-3.96-2.377c0-0.854,0.757-1.596,1.885-2.015c0.508,0.745,1.245,1.224,2.076,1.224s1.567-0.479,2.076-1.224c1.127,0.418,1.885,1.162,1.885,2.015C13.961,13.689,12.188,14.753,10,14.753z M10,0.891c-5.031,0-9.109,4.079-9.109,9.109c0,5.031,4.079,9.109,9.109,9.109c5.031,0,9.109-4.078,9.109-9.109C19.109,4.969,15.031,0.891,10,0.891z M10,18.317c-4.593,0-8.317-3.725-8.317-8.317c0-4.593,3.724-8.317,8.317-8.317c4.593,0,8.317,3.724,8.317,8.317C18.317,14.593,14.593,18.317,10,18.317z\",\n}\n\nexport const Icon = ({ name, className, onClick, viewBox, width, height}) => \n    <svg className={className} onClick={onClick} viewBox={viewBox} width={width} height={height} fill=\"white\">\n        <path d={iconPathMap[name]}></path>\n    </svg>\n\nIcon.defaultProps = {\n  viewBox:\"0 0 20 20\", \n  width: \"24px\", \n  height: \"24px\"\n};\n\nIcon.propTypes = {\n  name: PropTypes.string.isRequired,\n  className: PropTypes.string,\n  onClick: PropTypes.func,\n  viewBox: PropTypes.string,\n  width: PropTypes.string,\n  height: PropTypes.string\n}","import React, { useState, useEffect } from 'react';\nimport PropTypes from 'prop-types';\nimport { Icon } from './Icon';\nimport \"./Footer.scss\";\n\nconst Footer = ({ selectedPhotos, shareSelectedPhotos, selectedUnsharedPhotos, switchSelectAll }) => {\n  const [popupVisibility, toggleVisibility] = useState(false);\n\n  useEffect(() => {\n    if(selectedUnsharedPhotos.length === 0 && popupVisibility){\n      toggleVisibility(false)\n    }\n  }, [selectedUnsharedPhotos, popupVisibility]);\n\n\n  const areUnsharedAndSelectedEqual = selectedUnsharedPhotos.length === selectedPhotos.length;\n  return <div className=\"footer\">\n      <div className=\"footer__right\">\n        {selectedUnsharedPhotos.length > 0 && <div onClick={() => toggleVisibility(!popupVisibility)}>\n            <Icon name=\"share\" className=\"footer__share-icon\" />\n        </div>}\n\n        {popupVisibility &&\n          <div className=\"popup\">\n              {!areUnsharedAndSelectedEqual && <p>{selectedUnsharedPhotos.length} of {selectedPhotos.length} selected photos are not shared.</p>}\n              <p>Share {selectedUnsharedPhotos.length} photos?</p>\n              <div className=\"popup__action-buttons\">\n                  <div className=\"popup__action--close\" onClick={() =>{ toggleVisibility(false)}}>Cancel</div>\n                  <div className=\"popup__action--send\" onClick={() => {shareSelectedPhotos(selectedUnsharedPhotos); toggleVisibility(false)}}>\n                  Share\n                  </div>\n              </div>\n          </div>\n        }\n        <div>\n          <Icon name=\"user\" className=\"footer__share-icon\" />\n        </div>\n      </div>\n      {selectedPhotos.length > 0 && <div className=\"footer__left\">\n        <Icon name=\"cancel\" className=\"cancel-icon\" width=\"20px\" height=\"20px\" onClick={() => {toggleVisibility(false); switchSelectAll(false)}}/>\n        {`${selectedPhotos.length} Selected`}\n        </div>}\n    </div>\n}\n\n\nFooter.propTypes = {\n  selectedPhotos: PropTypes.arrayOf(PropTypes.shape({\n  })).isRequired,\n  switchSelectAll: PropTypes.func.isRequired\n}\n\nexport default Footer","export const loadingStates = {\n  LOADED: \"LOADED\",\n  LOADING: \"LOADING\",\n  ERROR: \"ERROR\"\n}\n","import * as actionTypes from \"../constants/actions\";\nimport { loadingStates } from \"../constants/states\";\n\nexport const fetchPhotosBegin = () => ({\n\ttype: actionTypes.FETCH_PHOTOS_BEGIN,\n});\n\nexport const fetchPhotosSuccess = (photos) => ({\n\ttype: actionTypes.FETCH_PHOTOS_SUCCESS,\n\tpayload: { photos },\n});\n\nexport const fetchPhotosFailure = (error) => ({\n\ttype: actionTypes.FETCH_PHOTOS_FAILURE,\n\tpayload: { error, loadingStatus: loadingStates.ERROR },\n});\n\nexport const sharePhotoUpdate = (id, website) => ({\n\ttype: actionTypes.SHARE_PHOTO_UPDATE,\n\tpayload: { id, website },\n});\n\nexport const sharePhotoFailure = (id, error) => ({\n\ttype: actionTypes.SHARE_PHOTO_FAILURE,\n\tpayload: { id, website: null, error },\n});\n\nexport const toggleSelection = (id) => ({\n\ttype: actionTypes.TOGGLE_SELECTION,\n\tid,\n});\n\nexport const toggleSelectAll = (isSelected) => ({\n\ttype: actionTypes.TOGGLE_SELECT_ALL,\n\tisSelected,\n});\n\nexport const connectWS = (url) => ({\n\ttype: actionTypes.WEBSOCKET_CONNECT,\n\tpayload: { url },\n});\n\nexport function fetchPhotos() {\n\treturn (dispatch) => {\n\t\tdispatch(fetchPhotosBegin());\n\t\tdispatch(connectWS(`${process.env.REACT_APP_WS_URL}/ws`));\n\t\treturn fetch(`${process.env.REACT_APP_API_URL}/`)\n\t\t\t.then(handleErrors)\n\t\t\t.then((res) => {\n\t\t\t\treturn res.json();\n\t\t\t})\n\t\t\t.then((json) => {\n\t\t\t\tdispatch(fetchPhotosSuccess(json.photos));\n\t\t\t\treturn json.photos;\n\t\t\t})\n\t\t\t.catch((error) => dispatch(fetchPhotosFailure(error)));\n\t};\n}\n\nfunction handleErrors(response) {\n\tif (!response.ok) {\n\t\tthrow Error(response.statusText);\n\t}\n\treturn response;\n}\n\nexport function shareSelectedPhotos(selectedUnsharedPhotos) {\n\treturn (dispatch) => {\n\t\tPromise.all(\n\t\t\tselectedUnsharedPhotos.map(async (photo) => {\n\t\t\t\tdispatch(\n\t\t\t\t\tsharePhotoUpdate(photo.id, actionTypes.PENDING_APPROVAL)\n\t\t\t\t);\n\t\t\t\treturn fetch(\n\t\t\t\t\t`${process.env.REACT_APP_API_URL}/website/photos/${photo.id}`,\n\t\t\t\t\t{\n\t\t\t\t\t\tmethod: \"POST\",\n\t\t\t\t\t}\n\t\t\t\t)\n\t\t\t\t\t.then(handleErrors)\n\t\t\t\t\t.then((res) => {\n\t\t\t\t\t\treturn res.json();\n\t\t\t\t\t})\n\t\t\t\t\t.then((json) => {\n\t\t\t\t\t\tdispatch(\n\t\t\t\t\t\t\tsharePhotoUpdate(photo.id, json.photo.website)\n\t\t\t\t\t\t);\n\t\t\t\t\t\tdispatch(toggleSelectAll(false));\n\t\t\t\t\t\treturn json.photos;\n\t\t\t\t\t})\n\t\t\t\t\t.catch((error) => {\n\t\t\t\t\t\tdispatch(sharePhotoFailure(photo.id, error));\n\t\t\t\t\t});\n\t\t\t})\n\t\t)\n\t\t\t.then((data) => {\n\t\t\t\tconsole.log(\"end of promise all\", data);\n\t\t\t})\n\t\t\t.catch((err) => {\n\t\t\t\tconsole.log(\"catch promise all\", err);\n\t\t\t});\n\t};\n}\n","export const FETCH_PHOTOS_BEGIN = \"FETCH_PHOTOS_BEGIN\";\nexport const FETCH_PHOTOS_SUCCESS =\n  \"FETCH_PHOTOS_SUCCESS\";\nexport const FETCH_PHOTOS_FAILURE =\n  \"FETCH_PHOTOS_FAILURE\";\nexport const TOGGLE_SELECTION = \"TOGGLE_SELECTION\";\nexport const TOGGLE_SELECT_ALL = \"TOGGLE_SELECT_ALL\";\nexport const SHARE_PHOTO_UPDATE = \"SHARE_PHOTO_UPDATE\";\nexport const SHARE_PHOTO_FAILURE = \"SHARE_PHOTO_FAILURE\";\nexport const WEBSOCKET_CONNECT = \"WEBSOCKET_CONNECT\";\nexport const WEBSOCKET_SEND = \"WEBSOCKET_SEND\";\nexport const WEBSOCKET_DISCONNECT = \"WEBSOCKET_DISCONNECT\";\nexport const WEBSOCKET_OPEN = \"WEBSOCKET_OPEN\";\nexport const WEBSOCKET_CLOSE = \"WEBSOCKET_CLOSE\";\nexport const WEBSOCKET_MESSAGE = \"WEBSOCKET_MESSAGE\";\nexport const PENDING_APPROVAL = \"PENDING_APPROVAL\";\nexport const WEBSITE_APPROVED = \"WEBSITE_APPROVED\";","export const areAllPhotosSelected = items => {\n  return items.every(item => item.selected);\n}\n\nexport const getSelectedPhotos = items => {\n  return items.filter(item => item.selected);\n}\n\nexport const getSelectedUnsharedPhotos = items => {\n  return items.filter(item => item.selected && item.website === null);\n}\n\nexport const getPhotosMetaData = items => {\n  return items.map((u) => {\n    const { url, ...others } = u;\n    return {\n      src: url,\n      height: +u.url.split('&h=')[1].split('&')[0],\n      width: +u.url.split('&w=')[1].split('&')[0],\n      ...others\n    };\n  })\n} \n","import { connect } from 'react-redux';\nimport Footer from '../components/Footer';\nimport { shareSelectedPhotos, toggleSelectAll } from \"../actions/photos\";\nimport { getSelectedPhotos, getSelectedUnsharedPhotos } from \"../selectors\";\n\n\nconst mapStateToProps = state => ({\n  selectedPhotos: getSelectedPhotos(state.photos.items),\n  selectedUnsharedPhotos: getSelectedUnsharedPhotos(state.photos.items)\n})\n\nconst mapDispatchToProps = dispatch => ({\n  shareSelectedPhotos: photos => dispatch(shareSelectedPhotos(photos)),\n  switchSelectAll: isSelected => dispatch(toggleSelectAll(isSelected))\n})\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(Footer)","import React from \"react\";\nimport { Icon } from './Icon';\nimport \"./Checkmark.scss\";\n\nexport const Checkmark = ({ selected, hovered }) => {  \n  return (\n    <div className={selected || hovered ? \"checkmark\" : \"hidden\"}>\n      <svg\n        className={`checkmark__icon ${hovered && !selected ? \"checkmark__icon--hover\": \"\"}`}\n        width=\"24px\"\n        height=\"24px\"\n      >\n        <circle cx=\"12.5\" cy=\"12.2\" r=\"8.292\" />\n      </svg>\n      <Icon name=\"check\" viewBox=\"0 0 24 24\" className={`checkmark__circle ${hovered && !selected ? \"checkmark__circle--hover\": \"\"}`} />\n    </div>\n)};","import React from \"react\";\nimport { Icon } from './Icon';\nimport \"./SharedIcon.scss\";\nimport { PENDING_APPROVAL, WEBSITE_APPROVED } from \"../constants/actions\";\n\nexport const SharedIcon = ({ sharingStatus }) => {  \n  return (\n  <>\n    {sharingStatus === WEBSITE_APPROVED && \n      <Icon name=\"share\" className=\"share-icon\" />\n    }\n    {sharingStatus === PENDING_APPROVAL &&\n    <div className=\"pending-icon\">\n      <svg className=\"loader__icon\"viewBox=\"25 25 50 50\" >\n        <circle className=\"loader__path\" cx=\"50\" cy=\"50\" r=\"20\" strokeWidth=\"2\" />\n      </svg>\n    </div>\n    }\n    </>\n)};","import React, { useState } from \"react\";\nimport { Checkmark } from \"./Checkmark\";\nimport { SharedIcon } from \"./SharedIcon\";\nimport { PENDING_APPROVAL } from \"../constants/actions\";\nimport \"./Photo.scss\";\n\nconst selectedImgStyle = {\n  transform: \"translateZ(0px) scale3d(0.9, 0.9, 1)\",\n  transition: \"transform .135s cubic-bezier(0.0,0.0,0.2,1),opacity linear .15s\"\n};\n\nconst SelectedImage = ({\n  photo,\n  onClick,\n  selectionMode\n}) => {\n  const [isHovered, setIsHovered] = useState(false);\n  //calculate x,y scale\n  const sx = (100 - (30 / photo.width) * 100) / 100;\n  const sy = (100 - (30 / photo.height) * 100) / 100;\n  selectedImgStyle.transform = `translateZ(0px) scale3d(${sx}, ${sy}, 1)`;\n\n  const imageStyle = photo.selected ? { ...selectedImgStyle } : {};\n  const imageOpacity = photo.website === PENDING_APPROVAL ? 0.3 : 1;\n\n  return (\n    <div\n      style={{ height: photo.height, width: photo.width }}\n      className={`image__container ${photo.selected ? \"selected\" : \"\"}`}\n      onMouseEnter={() => setIsHovered(!photo.selected)}\n      onMouseLeave={() => setIsHovered(false)}\n    >\n      {selectionMode &&  !photo.selected && !isHovered? \n        <div className=\"selection-placeholder\"/> : \n        <Checkmark selected={photo.selected} hovered={isHovered}/>\n      }\n      <SharedIcon sharingStatus={photo.website}/>\n      <img\n        alt={photo.title}\n        className=\"image\"\n        style={{...imageStyle, opacity: imageOpacity}}\n        {...photo}\n        onClick={onClick}\n      />\n    </div>\n  );\n};\n\nexport default SelectedImage;\n","import React, { useCallback, useEffect } from \"react\";\nimport { connect } from \"react-redux\";\nimport Gallery from \"react-photo-gallery\";\nimport { fetchPhotos, toggleSelection, toggleSelectAll } from \"../actions/photos\";\nimport { areAllPhotosSelected, getPhotosMetaData, getSelectedPhotos } from \"../selectors\";\nimport { loadingStates } from \"../constants/states\";\nimport Photo from \"./Photo\";\nimport './App.scss';\n\nconst PhotosList = props => {\n  const { loadingStatus, photos, getPhotos, togglePhotoSelection, switchSelectAll, allSelected, selectedPhotos } = props;\n  const onInit = function(){ \n\t  getPhotos();\n  }\n  const toggleSelectAllPhotos = () => {\n    switchSelectAll(!allSelected);\n  };\n\n  useEffect(onInit, []);\n\n  const imageRenderer = useCallback(\n    ({ index, photo }) => (\n      <Photo\n        onClick={() => \n          togglePhotoSelection(photo.id)\n        }\n        key={photo.id}\n        index={index}\n        photo={photo}\n        selectionMode={selectedPhotos.length > 0}\n      />\n    ),\n    [togglePhotoSelection, selectedPhotos]\n  );\n\n  if (loadingStatus === loadingStates.LOADING) {\n    return <div className=\"placeHolder\"><h2>Loading...</h2></div>;\n  } else if (loadingStatus === loadingStates.ERROR) {\n    return <div className=\"placeHolder\"><h2>Photos Cannot be loaded please try again later</h2></div>;\n  }\n\n  return (\n    <>\n      <div className=\"toggle-select\" onClick={toggleSelectAllPhotos}>{allSelected ? \"Deselect All\" : \"Select All\"}</div>\n      <Gallery photos={getPhotosMetaData(photos)} renderImage={imageRenderer} />\n    </>\n  );\n}\n\nconst mapStateToProps = state => ({\n  photos: state.photos.items,\n  loadingStatus: state.photos.loadingStatus,\n  error: state.photos.error,\n  selectedPhotos: getSelectedPhotos(state.photos.items),\n  allSelected: areAllPhotosSelected(state.photos.items)\n});\n\nconst mapDispatchToProps = dispatch => ({\n  getPhotos: () => dispatch(fetchPhotos()),\n  togglePhotoSelection: id => dispatch(toggleSelection(id)),\n  switchSelectAll: isSelected => dispatch(toggleSelectAll(isSelected))\n})\n\nexport default connect(mapStateToProps, mapDispatchToProps)(PhotosList);","import React from \"react\";\nimport \"./Header.scss\";\n\nexport const Header = () => {\n    return <header className=\"header\">\n        <h1 className=\"header__title\">Redux-Powered Photo Gallery</h1>\n        <p>This is a Google Photos style app for showcasing React and Redux implementation and integration. The app is connected to a mock server and allows user to interactively select and share photos. It makes API calls to retrieve and share photos and listens for the response using a WebSocket.</p>\n        <p>To test it select as many photos as you like and click on the share icon at the bottom. There must be at least one non-shared photo selected</p>\n        <p>Source Code: <a className=\"header__link\" rel=\"noopener noreferrer\" href=\"https://github.com/torabiho/redux-photo-gallery\" target=\"_blank\">github.com/torabiho/redux-photo-gallery</a></p>\n    </header>\n}","import React from \"react\";\nimport SelectedPhotos from \"../containers/SelectedPhotos\";\nimport PhotosList from \"./PhotosList\";\nimport { Header } from \"./Header\";\nimport \"./App.scss\";\n\nconst App = () => (\n  <div className=\"main-wrapper\">\n    <Header />\n    <PhotosList />\n    <SelectedPhotos />\n  </div>\n)\n\nexport default App","import * as actionTypes from '../constants/actions';\nimport { loadingStates } from \"../constants/states\";\n\nconst initialState = {\n  items: [],\n  loadingStatus: loadingStates.LOADING,\n  error: null\n};\n\nconst setLoadingState = (state, action) => {\n  return {\n        ...state,\n        loadingStatus: loadingStates.LOADING\n      }\n}\n\nconst loadPhotos = (state, action) => {\n  return {\n        ...state,\n        loadingStatus: loadingStates.LOADED,\n        items: action.payload.photos\n      }\n}\n\nconst setErrorState = (state, action) => {\n  return {\n        ...state,\n        loadingStatus: loadingStates.ERROR,\n        error: action.payload.error,\n        items: []\n      }\n}\n\nconst toggleSelection = (state, action) => {\n  return {\n        ...state,\n        items: state.items.map(item =>\n        (item.id === action.id)\n          ? {...item, selected: !item.selected}\n          : item\n      )}\n}\n\nconst toggleSelectionAll = (state, action) => {\n  return {\n        ...state,\n        items: state.items.map(item => ({...item,selected: action.isSelected}))\n      }\n}\n\nconst setSharePhotoPending = (state, action) => {\n  return {\n        ...state,\n        items: state.items.map(item =>\n        (item.id === action.payload.id)\n          ? {...item, website: action.payload.website}\n          : item\n      )}\n}\n\nconst setSharePhotoError = (state, action) => {\n  return {\n        ...state,\n        error: action.payload.error,\n        items: state.items.map(item =>\n        (item.id === action.payload.id)\n          ? {...item, website: action.payload.website}\n          : item\n      )}\n}\n\nconst setSharePhotoDone = (state, action) => {\n  const data = JSON.parse(action.payload.data);\n  return {\n    ...state,\n    items: state.items.map(item =>\n    (item.id === data.photo.id)\n      ? {...item, website: data.event}\n      : item\n  )};\n}\n\nexport default function photos(state = initialState, action) {\n  switch(action.type) {\n    case actionTypes.FETCH_PHOTOS_BEGIN:\n      return setLoadingState(state, action)\n\n    case actionTypes.FETCH_PHOTOS_SUCCESS:\n      return loadPhotos(state, action);\n\n    case actionTypes.FETCH_PHOTOS_FAILURE:\n      return setErrorState(state, action);\n\n    case actionTypes.TOGGLE_SELECTION:\n      return toggleSelection(state, action);\n\n    case actionTypes.TOGGLE_SELECT_ALL:\n      return toggleSelectionAll(state, action);\n\n    case actionTypes.SHARE_PHOTO_UPDATE:\n      return setSharePhotoPending(state, action);\n\n    case actionTypes.SHARE_PHOTO_FAILURE:\n      return setSharePhotoError(state, action);\n\n    case actionTypes.WEBSOCKET_MESSAGE:\n      return setSharePhotoDone(state, action);\n\n    default:\n      return state;\n  }\n}\n","import { combineReducers } from 'redux';\nimport photos from './photos';\n\nexport default combineReducers({\n  photos\n})","import * as actionTypes from '../constants/actions';\nlet ws;\n\nconst websocket = store => next => action => {\n  const dispatch = store.dispatch;\n  switch (action.type) {\n    case actionTypes.WEBSOCKET_CONNECT:\n      ws = new WebSocket(action.payload.url);\n      ws.onopen = () => dispatch({ type: actionTypes.WEBSOCKET_OPEN });\n      ws.onclose = (event) => dispatch({ type: actionTypes.WEBSOCKET_CLOSE, payload: event });\n      ws.onmessage = (event) => dispatch({ type: actionTypes.WEBSOCKET_MESSAGE, payload: event });\n\n      break;\n\n    case actionTypes.WEBSOCKET_SEND:\n      ws.send(JSON.stringify(action.payload));\n      break;\n\n    case actionTypes.WEBSOCKET_DISCONNECT:\n      ws.close();\n      break;\n\n    default:\n      break;\n  };\n\n  return next(action);\n};\n\nexport default websocket;","import React from 'react';\nimport { render } from 'react-dom';\nimport \"./index.css\";\nimport { createStore, applyMiddleware } from \"redux\";\nimport thunk from \"redux-thunk\";\nimport { Provider } from 'react-redux';\nimport App from './components/App';\nimport rootReducer from './reducers';\nimport websocket from './middleware/websocket';\n\nconst store = createStore(\n  rootReducer,\n  applyMiddleware(thunk, websocket)\n);\n\nrender(\n  <Provider store={store}>\n    <App />\n  </Provider>,\n  document.getElementById('root')\n)"],"sourceRoot":""}